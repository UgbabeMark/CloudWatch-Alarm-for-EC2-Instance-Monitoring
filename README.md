# CloudWatch Alarms for EC2 Instance Monitoring

  CloudWatch Alarms for EC2 Instance monitoring (Disk_Used_percent and CPU_Utilization)

  ![Enrollment](Images/Cloudwatch.png)

  This project demonstrates the creation of CloudWatch alarms for monitoring an EC2 instance's disk_usage_percent and CPU Utilization on AWS. 

  These alarms notify you when predefined thresholds are breached, enabling proactive monitoring and potential issue identification.

# Setup Instructions

# 1. Create IAM Role for EC2:

  Create an IAM role with appropriate permissions for EC2 instances to publish metrics to CloudWatch.

  Select trusted entity and Use Cae
  
  ![Enrollment](Images/role1.png)

  Add Permissions and Search for CloudWatchAgentServerPolicy
  
  ![Enrollment](Images/role2.png)

  Enter Role Name and Create Role
  
 #  ![Enrollment](Images/role3.png)

# 2. Launch EC2 Instance:

  Launch an EC2 instance that necessitates monitoring. 

  ![Enrollment](Images/ec2.png)

  
  **Add IAM Role**

   Select instance to Modify IA Role.
   
  ![Enrollment](Images/ec21.png)

  Modify IAM Role and Update IAM Role
  ![Enrollment](Images/ec22.png)

  select Instance and connect
  
  ![Enrollment](Images/ec23.png)

  Connect Instance using EC2 Instance Connect
  
  # ![Enrollment](Images/ec24.png)

  
# 3. Install CloudWatch Agent:

  Follow the documentation to install the CloudWatch agent on the EC2 instance.

   Run the foloowing for Current Directory cd /tmp 

   Install Agent wget https://s3.amazonaws.com/amazoncloudwatch-agent/amazon_linux/amd64/latest/amazon-cloudwatch-agent.rpm

   update agent sudo rpm -U amazon-cloudwatch-agent.rpm
   
  ![Enrollment](Images/agent1.png)

  
  Run the follwing comand below and input the script provided to create configuration file.
  
  sudo vi /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json
  
  i=edit, esc=done, :wq=exit
  
  ![Enrollment](Images/Agent2.png)

  
  Start your cloudwatch Agent and confirm the confirguration. using the linux command 

  sudo systemctl restart amazon-cloudwatch-agent
  
  tail -f /opt/aws/amazon-cloudwatch-agent/logs/amazon-cloudwatch-agent.log

  # ![Enrollment](Images/Agent3.png)

# 4. Configure CloudWatch Alarms:

  Configure CloudWatch alarms to monitor specific metrics such as disk usage percentage and CPU utilization of the EC2 instance.

  Define suitable thresholds and associated actions to be triggered when metrics exceed the thresholds.

  select all Alarms and create alarm
  
  ![Enrollment](Images/ala1.png)

  Select Metrics and next
  
  ![Enrollment](Images/ala2.png)

  select dsik_Used_percent form metrics
  
  ![Enrollment](Images/ala3.png)

  Configure metrics and select next
  
  ![Enrollment](Images/ala4.png)

  Notification: Create sns topic and provide email. select  Next
  
  ![Enrollment](Images/ala5.png)

  Add name and discription to alarm
  
  ![Enrollment](Images/ala7.png)

  Review and create alarm
  
  ![Enrollment](Images/ala8.png)

  Cloudwatch alarm created and eneabled.
  
  ![Enrollment](Images/ala10.png)

  Disk_Used_percent alarm
  ![Enrollment](Images/ala11.png)

  # for CPU Utilization
  
  Repeat thesame process for Disk_Used_percent

  Navigate to Ec2 on All metric in cloudwatch and select Ec2
  
  ![Enrollment](Images/ala12.png)

  Select Per-Instance Metrics
  
  ![Enrollment](Images/ala13.png)

  Select CPU utilization from list
  select metrics
  
  ![Enrollment](Images/ala14.png)

  Specify metrics and Condtions. select Next
  
  ![Enrollment](Images/ala15.png)
  
  EC2 CPU Utilization Alarm
   
  ![Enrollment](Images/ala16.png)

   Disk_Used_percent and EC2 CPU Utilizations Alarm
  ![Enrollment](Images/ala17.png)

# 5. Create SNS Topic:

Create an SNS topic to serve as the endpoint for notifications/alerts generated by CloudWatch alarms.

repeat this process for EC2 CPU utilization

![Enrollment](Images/sns1.png)

confrim susbscritpion on email and repeart this process for the second alarm

![Enrollment](Images/ala9.png)
